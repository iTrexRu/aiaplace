# Контекст Проекта: Facont

## Цель проекта
Facont (Factory Content) — это инструмент для автоматизированной генерации маркетингового контента (посты, сторис, заголовки, карусели, reels) с использованием AI. Приложение ориентировано на маркетологов и SMM-специалистов, позволяя им быстро создавать контент-планы и готовые материалы.

## Возможности Пользователя
*   **Генерация контента**: Создание постов, сторис, заголовков, каруселей и сценариев Reels на основе темы и контекста бизнеса.
*   **Управление темами**: Работа в рамках одной "Актуальной темы" с возможностью переключения на новую.
*   **Свои промпты**: Создание и использование кастомных промптов для генерации специфического контента.
*   **Онбординг**: Настройка профиля бизнеса (продукт, аудитория, стиль) для персонализации генераций.
*   **История**: Просмотр ранее созданного контента.
*   **Профиль**: Управление личными данными и интеграциями.

## Текущая Архитектура

### Frontend
*   **Стек**: Vanilla JS (ES6 Modules), HTML5, CSS3.
*   **Сборка**: Отсутствует. Используется нативный импорт модулей через `<script src="...">`.
*   **Роутинг**: Кастомный роутер (`router.js`), основанный на query-параметрах (`?view=page_name`).
*   **UI**: Одностраничное приложение (SPA). HTML-шаблоны (partials) подгружаются динамически через `fetch`.
*   **Стили**: Собственный CSS-фреймворк в файле `facont.css`.

### Backend
*   **Стек**: n8n (Workflow Automation Tool).
*   **API**: Webhook, принимающий JSON-запросы с параметром `cmd` (команда).
*   **Аутентификация**: Токен сессии (`X-Session-ID`), хранящийся в LocalStorage.

### База Данных
*   **СУБД**: PostgreSQL.
*   **Схема**: Хранит пользователей, сессии, клиентов, проекты, задачи и сгенерированный контент.

## Ключевые Решения
1.  **Отсутствие бандлера**: Для упрощения деплоя и разработки выбрана архитектура без Webpack/Vite. Все файлы правятся и деплоятся "как есть".
2.  **PHP как обертка**: Используется только для кеш-бастинга (версионирование ассетов) и начальной раздачи статики. Логики на PHP нет.
3.  **Модульность**: JS код разбит на модули (`core`, `features`, `auth`), но собирается в браузере.

## Ограничения
*   **API URL**: На данный момент жестко прописан в коде. Требует выноса в конфиг для разделения dev/prod окружений.
*   **Безопасность**: Токены передаются в заголовках. HTTPS обязателен.
