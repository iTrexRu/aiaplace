# TODO

## Общий список задач
- [x] (1) Добавить блок «Экспресс-онбординг» в разделе онбординга (промпт + ввод + кнопка, вызов fast_onboarding, показ результата в модалке)
- [x] (2) Не показывать welcome-модалку на онбординге, если все блоки завершены
- [ ] (3) Прогресс-бар онбординга: считать только вопросы (без приветствия/анализа/результата)
- [ ] (4) Убрать пункт NLP из интерфейса
- [ ] (5) Реализовать «Актуальный контекст темы» (единая тема между разделами + кнопка «Новая тема»)
- [ ] (6) Добавить блок «Ваши идеи для контента на сегодня» (сворачиваемый, сохранять состояние, дневной запрос actual_ideas)
- [ ] (7) Добавить раздел «Свои промты» (запуск/редактирование/хранение)

## Выполненные вне списка (для истории)
- [x] Логирование текущего коммита в консоль (commit.txt + deploy workflow)
  
## задачи следующего спринта
- [ ] тарифы
- [ ] работу с контентом через диалог, а не однократное выполнение промтов
- [ ] поменять ключи апи на кацей
- [ ] логика пробного режима (3 дня про + 4 за каждый пост)
- [ ] вместо тг заменить на веб-интерфейс
- [ ] еженедельная рассылка (идеи недели, результаты недели)
- [ ] логика микса экспресс-онборда и вопросами + редактирование


Вот список задач, которые я тебе давал. Ты сделал первую. Сохрани список в todo.md, чтобы не забыть, и переходи к 2й задаче:
1. В разделе онбординга добавить под существующими блоками (которые генерятся из json-файла с блоками/вопросами) блок "Экспресс-онбординг". Это заголовок, поле с текстом промта, поле для ввода текста (результат выполнения промта в сторонней ИИ) и кнопка "Загрузить информацию". Текст промта жестко забит в код страницы.
Логика работы:
- пользователь копирует текст промта, выполняет его где-то в своем ии, вставляет назад в поле текст результата, нажимает кнопку
- запускается сценарий н8н с командой fast_onboarding, пользователю возвращается результат выполнения в модальном окне

2. Сейчас в разделе онбординга при каждом заходе открывается модальное окно с приглашением "настроить фабрику под себя". Нужно, чтобы если весь онбординг уже пройден, это окно не открывалось.

3. В разделе онбординг в каждом блоке при прохождении пользователь видит прогресс-бар с указанием количества шагов. Сейчас количество шагов включает в себя не только вопросы, а все экраны блока онбординга, в т.ч. приветствие, "анализирую", "результат". Нужно, чтобы количество шагов было равно количеству вопросов, а другие экраны в нем бы не учитывались.

4. Нужно убрать пункт NLP из интерфейса

5. Нужно реализовать концепцию "Актуальный контекст темы". Это означает, что по умолчанию пользователь работает с какой-то одной темой (делает для нее контент в разных вариантах - рилс, пост, сторис и др.). Поэтому если он, например, начал работу, сделав пост по теме1, то потом он переходит в любой другой раздел (например, в рилс) - и там подставляется информация об этой же теме1.
Если пользователь хочет начать работу над другой темой2, то он должен где-то нажать кнопку "новая тема" должна присутствовать в интерфейсе на всех экранах в одном и том же месте - и тогда актуальной темой становится тема2, и она подставляется куда бы пользователь не переходил.

6. Нужно добавить блок "Ваши идеи для контента на сегодня". Внешний вид блока (параметры стилей и фрагмент кода) описан в аттаче.
Кроме того, нужно справа внизу в этот блок добавить иконку-стрелку при нажатии на которую блок будет сворачиваться в узкую плашку с надписью "Актуальные идеи для контента". При повторном нажатии блок должен снова раскрываться в полный размер.
Статус "полный размер" или "свернутый блок" должен сохраняться, чтобы если пользователь свернул блок, то при переходе в другой раздел он видит свернутый блок и наоборот.
Блок должен выводиться сверху в разделах: Home, Идея в пост, Сторис из текста, Заголовки, Карусель, Reels.
Логика появления информации в блоке:
- каждый день при первом заходе пользователя в систему в н8н отправляется команда actual_ideas
- результат ее работы сохраняется в контексте системы "на сегодня" и повторно команда выполняется только когда пользователь заходит в другой день впервые; этот результат из контекста выводится в блок

7. Надо добавить функциональность "Свои промты".
- это пункт в меню между Reels и Готовый контент
В этом разделе пользователь может:
- Запустить собственный произвольный промт для темы, с которой он сейчас работает (аналогично разделу "Идея в пост").
- Пользователь выбирает один из "своих промтов" в выпадающем списке рядом с полем ввода темы
- Если пользователь не добавил еще ни одного своего промта, то в списке только пункт "Добавить", при нажатии на который открывается модальное окно с формой: название промта, текст промта, кнопка сохранить (по кнопке вызывается н8н с командой add_my_prompt)
- когда пользователь выбрал промт, его текст появляется в поле над полем ввода темы (там пользователь может отредактировать промт). затем пользователь нажимает кнопку "выполнить", и запускается сценарий н8н с командой run_my_prompt (в сценарий передается текст промта из поля, текст темы из поля). Результат из сценария выводится под полем темы.
- также в этом разделе есть второй экран, где пользователь может просмотреть/удалить/отредактировать/добавить новые свои промты

я хочу, чтобы ты делал задачи по одной: сначала планируешь одну задачу, я подтверждаю план, ты ее делаешь, я проверяю, подтверждаю тебе - тогда ты переходишь к следующей.